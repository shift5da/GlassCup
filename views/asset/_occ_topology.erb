<div class="row" style='margin-top:20px;'>
  <div class="col-lg-12">
    <div class="panel panel-default">
      <div class="panel-heading">
        <i class="fa fa-random fa-fw"></i>
        光交箱网络拓扑图
        <div class="pull-right">
          <div class="btn-group">
            <button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown">
              操作
              <span class="caret"></span>
            </button>
            <ul class="dropdown-menu pull-right" role="menu">
              <li>
                <a href="#">打印</a>
              </li>
              <li>
                <a href="#">发送</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div class="panel-body">
        <div class="row">
          <div class="col-lg-12">
            <div id="chart_occ_topology" style="min-height:900px"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript">

  var myChart_occ_topology;
  $('#tab_menu_3').on('shown.bs.tab', function (e) {
    if (!myChart_occ_topology) {
      myChart_occ_topology = echarts.init(document.getElementById('chart_occ_topology'));
      myChart_occ_topology.showLoading();
      $.get('/data/community_ftth_topology.json', function (data) {
        myChart_occ_topology.hideLoading();

        myChart_occ_topology.setOption(option = {
          title: {
            text: ''
          },
          tooltip: {
            trigger: 'item',
            triggerOn: 'mousemove'
          },
          series: [
            {
              type: 'sankey',
              layout: 'none',
              data: data.nodes,
              links: data.links,
              itemStyle: {
                normal: {
                  borderWidth: 1,
                  borderColor: '#aaa'
                }
              },
              label: {
                normal: {
                  textStyle: {
                    color: '#35bda8'
                  }
                }
              }
            }
          ]
        });
      });
    }
  });
</script>
